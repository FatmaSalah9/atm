"use strict";(self.webpackChunkatm_mangment=self.webpackChunkatm_mangment||[]).push([[676],{7676:(y,p,s)=>{s.r(p),s.d(p,{LoginComponent:()=>Z});var _=s(5861),g=s(6814),l=s(6223),f=s(8810),v=s(7215),O=s(7394),d=s(2384),m=s(3999),e=s(5879),T=s(882),M=s(1778),h=s(2425);function A(a,c){1&a&&(e.TgZ(0,"small",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"LOGIN.PASSWORD_ERROR")))}function C(a,c){1&a&&(e.TgZ(0,"small",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"LOGIN.REQUIRED_ERROR")))}const L=function(a){return{"border-danger":a}},E=function(a,c){return{"fa-eye":a,"fa-eye-slash":c}},D=function(){return["/reset-password"]};let Z=(()=>{class a{constructor(t,i,n,r,o){this.userService=t,this.bankService=i,this.router=n,this.toastrService=r,this.toastr=o,this.showPassword=!1,this.user=new v.kl,this.subscription=new O.w0,this.loginType="company"}ngOnInit(){let t=localStorage.getItem("atm-user");t&&(this.user=JSON.parse(t))}ngOnDestroy(){this.subscription.unsubscribe()}login(){"company"===this.loginType?this.loginAsCompany():this.loginAsBank()}loginAsBank(){var t=this;this.subscription.add(this.bankService.loginBank(this.user).subscribe(function(){var i=(0,_.Z)(function*(n){if(n){t.userService.setToken(n);let r=t.userService.getDecodedToken();r&&t.userService.setUserData(r),t.router.navigate(["/work-plans"])}});return function(n){return i.apply(this,arguments)}}(),function(){var i=(0,_.Z)(function*(n){if(200===n.status){yield t.userService.setToken(n.error.text);let r=yield t.userService.getDecodedToken();r&&(yield t.userService.setUserData(r)),t.router.navigate(["/reports/owner"])}});return function(n){return i.apply(this,arguments)}}()))}loginAsCompany(){var t=this;this.subscription.add(this.userService.login(this.user).subscribe(function(){var i=(0,_.Z)(function*(n){if(n){t.userService.setToken(n);let r=t.userService.getDecodedToken();r&&t.userService.setUserData(r),t.router.navigate(["/companies"])}});return function(n){return i.apply(this,arguments)}}(),function(){var i=(0,_.Z)(function*(n){if(200===n.status){yield t.userService.setToken(n.error.text);let r=yield t.userService.getDecodedToken();r&&(yield t.userService.setUserData(r)),t.router.navigate(["/companies"])}});return function(n){return i.apply(this,arguments)}}()))}routeTo(t){this.router.navigate([t])}forgetPassword(){}rememberMe(t){t.target.checked?localStorage.setItem("atm-user",JSON.stringify(this.user)):localStorage.removeItem("atm-user")}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(T.K),e.Y36(M.y),e.Y36(d.F0),e.Y36(h._W),e.Y36(h._W))};static#n=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-login"]],standalone:!0,features:[e.jDz],decls:42,vars:41,consts:[[1,"demo-container"],[1,"container","mt-sm-5"],[1,"row"],[1,"col-lg-6","col-12","mx-auto","my-auto"],[1,"p-5","bg-white","rounded","shadow-lg"],[1,"mb-2","text-center"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"pb-3"],["ngDefaultControl","",3,"name","required","ngModel","currentForm","inputEmail","ngModelChange"],["email","ngModel"],[1,"pb-3","position-relative"],[1,"font-500","required","my-1"],["name","password","required","","pattern","^(?=.*[A-Za-z])(?=.*\\d).{8,}$",1,"form-control","rounded-2",3,"type","ngModel","placeholder","ngClass","ngModelChange"],["password","ngModel"],[1,"password-toggle-icon","position-absolute","pointer",3,"click"],[1,"fa",3,"ngClass"],["class","text-muted text-danger",4,"ngIf"],[1,"row","text-center","py-3"],[1,"col-auto"],["type","radio","name","color","value","company",3,"ngModel","ngModelChange"],["type","radio","name","color","value","bank",3,"ngModel","ngModelChange"],[1,"m-0","py-4"],[1,"text-muted",3,"routerLink"],["type","submit",1,"btn","btn-dark","btn-lg","w-100","shadow-lg"],[1,"text-muted","text-danger"]],template:function(i,n){if(1&i){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"form",6,7),e.NdJ("ngSubmit",function(){e.CHM(r);const u=e.MAs(9);return e.KtG(u.valid&&n.login())}),e.TgZ(10,"div",8)(11,"app-email-input",9,10),e.NdJ("ngModelChange",function(u){return n.user.email=u}),e.qZA()(),e.TgZ(13,"div",11)(14,"label",12),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",13,14),e.NdJ("ngModelChange",function(u){return n.user.password=u}),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"span",15),e.NdJ("click",function(){return n.showPassword=!n.showPassword}),e._UZ(21,"i",16),e.qZA(),e.YNc(22,A,3,3,"small",17),e.YNc(23,C,3,3,"small",17),e.qZA(),e.TgZ(24,"div",18)(25,"div",19)(26,"label")(27,"input",20),e.NdJ("ngModelChange",function(u){return n.loginType=u}),e.qZA(),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",19)(31,"label")(32,"input",21),e.NdJ("ngModelChange",function(u){return n.loginType=u}),e.qZA(),e._uU(33),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"p",22)(36,"a",23),e._uU(37),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"button",24),e._uU(40),e.ALo(41,"translate"),e.qZA()()()()()()()}if(2&i){const r=e.MAs(9),o=e.MAs(18);e.xp6(6),e.Oqu(e.lcZ(7,21,"LOGIN.TITLE")),e.xp6(5),e.Q6J("name","email")("required",!0)("ngModel",n.user.email)("currentForm",r)("inputEmail",n.user.email),e.xp6(4),e.Oqu(e.lcZ(16,23,"LOGIN.PASSWORD_LABEL")),e.xp6(2),e.s9C("type",n.showPassword?"text":"password"),e.s9C("placeholder",e.lcZ(19,25,"LOGIN.PASSWORD_PLACEHOLDER")),e.Q6J("ngModel",n.user.password)("ngClass",e.VKq(35,L,(o.touched||r.submitted)&&o.errors)),e.xp6(4),e.Q6J("ngClass",e.WLB(37,E,n.showPassword,!n.showPassword)),e.xp6(1),e.Q6J("ngIf",(null==o||null==o.value?null:o.value.length)>0&&o.invalid&&(o.dirty||o.touched||r.submitted)),e.xp6(1),e.Q6J("ngIf",(o.touched||r.submitted)&&(null==o||null==o.errors?null:o.errors.required)),e.xp6(4),e.Q6J("ngModel",n.loginType),e.xp6(1),e.hij(" ",e.lcZ(29,27,"LOGIN.COMPANY")," "),e.xp6(4),e.Q6J("ngModel",n.loginType),e.xp6(1),e.hij(" ",e.lcZ(34,29,"LOGIN.BANK")," "),e.xp6(3),e.Q6J("routerLink",e.DdM(40,D)),e.xp6(1),e.Oqu(e.lcZ(38,31,"LOGIN.FORGET_PASSWORD")),e.xp6(3),e.hij(" ",e.lcZ(41,33,"LOGIN.BUTTON")," ")}},dependencies:[g.ez,g.mk,g.O5,l.u5,l._Y,l.Fj,l._,l.JJ,l.JL,l.Q7,l.c5,l.On,l.F,f.q,d.Bz,d.rH,m.aw,m.X$]})}return a})()}}]);