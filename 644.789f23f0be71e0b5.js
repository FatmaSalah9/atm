"use strict";(self.webpackChunkatm_mangment=self.webpackChunkatm_mangment||[]).push([[644],{5277:(M,C,p)=>{p.d(C,{J:()=>d});var b=p(9862),e=p(5879);let d=(()=>{class g{constructor(){this.baseUrl="http://waleed81-001-site1.jtempurl.com",this.httpClient=(0,e.f3M)(b.eN)}createCompany(r){return this.httpClient.post(`${this.baseUrl}/Company/CreateCompany`,r)}updateData(r,u){return this.httpClient.put(`${this.baseUrl}/Company/UpdateCompany?CompanyId=${r}`,u)}getData(){return this.httpClient.get(`${this.baseUrl}/Company/GetAllCompanies`)}getAllRepresentativesForSpeceificCompany(r){return this.httpClient.get(`${this.baseUrl}/Company/GetAllRepresentativesForSpeceificCompany?CompanyDataId=${r}`)}getAllEmployeeForSpeceificCompany(r){return this.httpClient.get(`${this.baseUrl}/Company/GetAllEmployeeForSpeceificCompany?CompanyDataId=${r}`)}getAllAdmins(){return this.httpClient.get(`${this.baseUrl}/Company/GetAllAdmins`)}deleteData(r,u){return this.httpClient.delete(`${this.baseUrl}/Company/DeleteCompany?UserId=${r}&CompanyId=${u}`)}getCompaniesProgramSetting(){return this.httpClient.get(`${this.baseUrl}/Company/GetCompaniesProgramSetting`)}static#e=this.\u0275fac=function(u){return new(u||g)};static#t=this.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},1644:(M,C,p)=>{p.r(C),p.d(C,{ListOfCompaniesComponent:()=>L});var b=p(6283),e=p(5879),l=p(6814),d=p(7285),g=p(8569),c=p(6223);class r{constructor(){this.createUserId=1,this.companyName="",this.cityCodeId=null,this.companyAddress="",this.companyMobil="",this.companyPhone="",this.companyWhatsapp="",this.companyEmail="",this.companyWebSite="",this.taxRegistrationNumber="",this.commercialRegisterNumber="",this.description="",this.imageFile=null}}var u=p(8431),_=p(5277),Z=p(7361),T=p(6828),v=p(8810),N=p(7588),A=p(882),h=p(3999);const x=function(o){return{"ng-error":o}};function I(o,y){if(1&o){const t=e.EpF();e.TgZ(0,"ng-select",32,33),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.company.cityCodeId=n)}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(),a=e.MAs(7);e.Q6J("clearable",!0)("name","city")("items",t.cities)("ngModel",t.company.cityCodeId)("required",!0)("notFoundText",e.lcZ(2,9,"companies.form.noDataFound"))("searchable",!0)("disabled",t.isView)("ngClass",e.VKq(11,x,!t.company.cityCodeId&&a.submitted))}}function U(o,y){1&o&&(e.TgZ(0,"p",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"companies.form.required")," "))}let f=(()=>{class o{constructor(){this.title="",this.id="",this.updateCompany=null,this.isView=!1,this.companyImage=null,this.company=new r,this.cities=[{name:"dd",id:1}],this.activeModal=(0,e.f3M)(d.Kz),this.companyService=(0,e.f3M)(_.J),this.lookupService=(0,e.f3M)(Z.W),this.userService=(0,e.f3M)(A.K),this.userData=null,this.userService.getUserData().subscribe(t=>{t&&(this.userData=t,this.company.createUserId=t?.UserId)}),this.getCitits()}ngOnInit(){this.updateCompany&&(this.companyImage=this.updateCompany.imageUrl?this.updateCompany.imageUrl:null,this.company=Object.assign({},this.updateCompany))}getCitits(){this.lookupService.getCities().subscribe(t=>{this.cities=t})}saveCompany(){this.id.length>0?this.updateData(this.id):this.addNewData()}addNewData(){const t=new FormData;t.append("CreateUserId",(this.userData?this.userData.UserId:0).toString()),t.append("companyName",this.company.companyName),t.append("CityCodeId",this.company.cityCodeId?this.company.cityCodeId.toString():""),t.append("commercialRegisterNumber",this.company.commercialRegisterNumber),t.append("companyAddress",this.company.companyAddress),t.append("companyWhatsapp",this.company.companyWhatsapp),t.append("companyEmail",this.company.companyEmail),t.append("companyMobil",this.company.companyMobil),t.append("companyPhone",this.company.companyPhone),t.append("companyWebSite",this.company.companyWebSite),t.append("description",this.company.description),t.append("taxRegistrationNumber",this.company.taxRegistrationNumber),t.append("ImageFile",this.company.imageFile),this.companyService.createCompany(t).subscribe(a=>{a&&this.activeModal.close(!0)})}updateData(t){const a=new FormData;a.append("Modifiedby",(this.userData?this.userData?.UserId:"").toString()),a.append("companyName",this.company.companyName),a.append("CityCodeId",this.company.cityCodeId?this.company.cityCodeId.toString():""),a.append("commercialRegisterNumber",this.company.commercialRegisterNumber),a.append("CompanyAddress",this.company.companyAddress),a.append("CompanyWhatsapp",this.company.companyWhatsapp),a.append("CompanyEmail",this.company.companyEmail),a.append("CompanyMobil",this.company.companyMobil),a.append("CompanyPhone",this.company.companyPhone),a.append("CompanyWebSite",this.company.companyWebSite),a.append("Description",this.company.description),a.append("TaxRegistrationNumber",this.company.taxRegistrationNumber),a.append("ImageFile",this.company.imageFile),this.companyService.updateData(t,a).subscribe(n=>{n&&this.activeModal.close(!0)},n=>{200===n.status&&this.activeModal.close(!0)})}static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-update-company"]],inputs:{title:"title",id:"id",updateCompany:"updateCompany",isView:"isView"},standalone:!0,features:[e.jDz],decls:66,vars:105,consts:[[1,"row","m-0","p-3"],[1,"col-9"],[1,"col-3","text-end","pt-2"],[1,"fa-solid","fa-xmark","text-danger","fs-4","pointer",3,"click"],[1,"p-3",3,"ngSubmit"],["companyForm","ngForm"],[1,"row"],[1,"col-12","col-md-6"],["ngDefaultControl","",3,"name","label","required","ngModel","currentForm","inputText","disabled","ngModelChange"],["companyName","ngModel"],["ngDefaultControl","",3,"inputMaxLength","minLength","name","label","required","ngModel","currentForm","inputText","disabled","ngModelChange"],["companyPhone","ngModel"],["ngDefaultControl","",3,"inputMaxLength","minLength","name","label","required","ngModel","currentForm","disabled","inputText","ngModelChange"],["companyMobil","ngModel"],["companyWhatsapp","ngModel"],["companyWebSite","ngModel"],["ngDefaultControl","",3,"name","required","ngModel","currentForm","inputEmail","disabled","ngModelChange"],["email","ngModel"],["companyAddress","ngModel"],["commercialRegisterNumber","ngModel"],["taxRegistrationNumber","ngModel"],["for","city",1,"required","my-1"],["ngDefaultControl","","bindLabel","cityNameL1","bindValue","cityId",3,"clearable","name","items","ngModel","required","notFoundText","searchable","disabled","ngClass","ngModelChange",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"col-12"],["for","",1,"required"],["ngDefaultControl","",1,"form-control",3,"name","required","ngModel","disabled","ngModelChange"],["description","ngModel"],[1,"my-1","required"],[3,"curentImage","SelectImage"],[1,"col-12","text-end"],["type","submit",1,"btn","btn-dark","btn-md","shadow-lg","mt-3","col-3",3,"disabled"],["ngDefaultControl","","bindLabel","cityNameL1","bindValue","cityId",3,"clearable","name","items","ngModel","required","notFoundText","searchable","disabled","ngClass","ngModelChange"],["city","ngModel"],[1,"text-danger"]],template:function(a,n){if(1&a){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.qZA()(),e.TgZ(4,"div",2)(5,"i",3),e.NdJ("click",function(){return n.activeModal.dismiss()}),e.qZA()()(),e.TgZ(6,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(s);const i=e.MAs(7);return e.KtG(i.valid&&n.saveCompany())}),e.TgZ(8,"div",6)(9,"div",7)(10,"app-text-input",8,9),e.NdJ("ngModelChange",function(i){return n.company.companyName=i}),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",7)(14,"app-input-number-only",10,11),e.NdJ("ngModelChange",function(i){return n.company.companyPhone=i}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",7)(18,"app-input-number-only",12,13),e.NdJ("ngModelChange",function(i){return n.company.companyMobil=i}),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",7)(22,"app-input-number-only",10,14),e.NdJ("ngModelChange",function(i){return n.company.companyWhatsapp=i}),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",7)(26,"app-text-input",8,15),e.NdJ("ngModelChange",function(i){return n.company.companyWebSite=i}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",7)(30,"app-email-input",16,17),e.NdJ("ngModelChange",function(i){return n.company.companyEmail=i}),e.qZA()(),e.TgZ(32,"div",7)(33,"app-text-input",8,18),e.NdJ("ngModelChange",function(i){return n.company.companyAddress=i}),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",7)(37,"app-text-input",8,19),e.NdJ("ngModelChange",function(i){return n.company.commercialRegisterNumber=i}),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",7)(41,"app-text-input",8,20),e.NdJ("ngModelChange",function(i){return n.company.taxRegistrationNumber=i}),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div",7)(45,"div")(46,"label",21),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.YNc(49,I,3,13,"ng-select",22),e.YNc(50,U,3,3,"p",23),e.qZA()(),e.TgZ(51,"div",24)(52,"label",25),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"textarea",26,27),e.NdJ("ngModelChange",function(i){return n.company.description=i}),e.qZA()(),e.TgZ(57,"div",7)(58,"label",28),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"app-input-image",29),e.NdJ("SelectImage",function(i){return n.company.imageFile=i}),e.qZA()(),e.TgZ(62,"div",30)(63,"button",31),e._uU(64),e.ALo(65,"translate"),e.qZA()()()()}if(2&a){const s=e.MAs(7);e.xp6(3),e.Oqu(n.title),e.xp6(7),e.Q6J("name","userName")("label",e.lcZ(12,81,"companies.form.companyName"))("required",!0)("ngModel",n.company.companyName)("currentForm",s)("inputText",n.company.companyName)("disabled",n.isView),e.xp6(4),e.Q6J("inputMaxLength",11)("minLength",11)("name","companyPhone")("label",e.lcZ(16,83,"companies.form.companyPhone"))("required",!0)("ngModel",n.company.companyPhone)("currentForm",s)("inputText",n.company.companyPhone)("disabled",n.isView),e.xp6(4),e.Q6J("inputMaxLength",11)("minLength",11)("name","companyMobil")("label",e.lcZ(20,85,"companies.form.companyMobil"))("required",!0)("ngModel",n.company.companyMobil)("currentForm",s)("disabled",n.isView)("inputText",n.company.companyMobil),e.xp6(4),e.Q6J("inputMaxLength",11)("minLength",11)("name","companyWhatsapp")("label",e.lcZ(24,87,"companies.form.companyWhatsapp"))("required",!0)("ngModel",n.company.companyWhatsapp)("currentForm",s)("inputText",n.company.companyWhatsapp)("disabled",n.isView),e.xp6(4),e.Q6J("name","companyWebSite")("label",e.lcZ(28,89,"companies.form.companyWebSite"))("required",!0)("ngModel",n.company.companyWebSite)("currentForm",s)("inputText",n.company.companyWebSite)("disabled",n.isView),e.xp6(4),e.Q6J("name","email")("required",!0)("ngModel",n.company.companyEmail)("currentForm",s)("inputEmail",n.company.companyEmail)("disabled",n.isView),e.xp6(3),e.Q6J("name","companyAddress")("label",e.lcZ(35,91,"companies.form.companyAddress"))("required",!0)("ngModel",n.company.companyAddress)("currentForm",s)("inputText",n.company.companyAddress)("disabled",n.isView),e.xp6(4),e.Q6J("name","commercialRegisterNumber")("label",e.lcZ(39,93,"companies.form.commercialRegisterNumber"))("required",!0)("ngModel",n.company.commercialRegisterNumber)("currentForm",s)("inputText",n.company.commercialRegisterNumber)("disabled",n.isView),e.xp6(4),e.Q6J("name","taxRegistrationNumber")("label",e.lcZ(43,95,"companies.form.taxRegistrationNumber"))("required",!0)("ngModel",n.company.taxRegistrationNumber)("currentForm",s)("inputText",n.company.taxRegistrationNumber)("disabled",n.isView),e.xp6(6),e.Oqu(e.lcZ(48,97,"companies.form.city")),e.xp6(2),e.Q6J("ngIf",n.cities),e.xp6(1),e.Q6J("ngIf",!n.company.cityCodeId&&s.submitted),e.xp6(3),e.Oqu(e.lcZ(54,99,"companies.form.description")),e.xp6(2),e.Q6J("name","description")("required",!0)("ngModel",n.company.description)("disabled",n.isView),e.xp6(4),e.Oqu(e.lcZ(60,101,"companies.form.companyImage")),e.xp6(2),e.Q6J("curentImage",n.companyImage),e.xp6(2),e.Q6J("disabled",n.isView),e.xp6(1),e.hij(" ",e.lcZ(65,103,"companies.form.saveButton")," ")}},dependencies:[l.ez,l.mk,l.O5,g.t,c.u5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.On,c.F,u.A0,u.w9,T.d,v.q,N.y,h.aw,h.X$],styles:[".company-image[_ngcontent-%COMP%]{width:100%;height:70px}"]})}return o})();var D=p(3103);function q(o,y){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addNew())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"companies.addNewButton")))}function w(o,y){if(1&o&&(e.TgZ(0,"th",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=y.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t))}}function F(o,y){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",12),e._uU(2),e.qZA(),e.TgZ(3,"td",12),e._uU(4),e.qZA(),e.TgZ(5,"td",12),e._uU(6),e.qZA(),e.TgZ(7,"td",12),e._uU(8),e.qZA(),e.TgZ(9,"td",12),e._uU(10),e.qZA(),e.TgZ(11,"td",12),e._uU(12),e.qZA(),e.TgZ(13,"td",13)(14,"div",14)(15,"div",15),e._UZ(16,"i",16),e.TgZ(17,"div",17)(18,"button",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.viewDataTable(s))}),e._UZ(19,"i",19),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.updateDataTable(s))}),e._UZ(23,"i",20),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"button",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.openCofirmDelete(s.companyId))}),e._UZ(27,"i",21),e._uU(28),e.ALo(29,"translate"),e.qZA()()()()()()}if(2&o){const t=y.$implicit,a=y.index;e.xp6(2),e.Oqu(a+1),e.xp6(2),e.Oqu(t.companyName),e.xp6(2),e.Oqu(t.companyAddress),e.xp6(2),e.Oqu(t.companyMobil),e.xp6(2),e.Oqu(t.companyPhone),e.xp6(2),e.Oqu(t.companyWhatsapp),e.xp6(8),e.hij(" ",e.lcZ(21,9,"actions.view")," "),e.xp6(4),e.hij(" ",e.lcZ(25,11,"actions.update")," "),e.xp6(4),e.hij(" ",e.lcZ(29,13,"actions.delete")," ")}}let L=(()=>{class o{ngOnInit(){this.showHideAddCompanyBtn(),this.getAllData()}constructor(){this.direction="",this.userId=1,this.userData=null,this.cols=["#","companies.name","companies.address","companies.mobil","companies.phone","companies.whatsapp",""],this.dataTable=[],this.modalService=(0,e.f3M)(d.FF),this.companyService=(0,e.f3M)(_.J),this.userService=(0,e.f3M)(A.K),this.translate=(0,e.f3M)(h.sK),this.showAddNewCompanyBtn=!1,this.userService.getUserData().subscribe(t=>{this.userData=t})}viewDataTable(t){const a=this.modalService.open(f,{backdrop:"static",centered:!0,size:"lg"});a.componentInstance.title=this.translate.instant("companies.form.viewTitle"),a.componentInstance.isView=!0,a.componentInstance.id=t.companyId,a.componentInstance.updateCompany=t}addNew(){const t=this.modalService.open(f,{backdrop:"static",centered:!0,size:"lg"});t.componentInstance.title="Add new compony",t.result.then(a=>{a&&this.ngOnInit()})}onScrollDown(t){this.appendItemsToDataTable(),this.direction="scroll down"}updateDataTable(t){const a=this.modalService.open(f,{backdrop:"static",centered:!0,size:"lg"});a.componentInstance.title=this.translate.instant("companies.form.updateTitle"),a.componentInstance.id=t.companyId,a.componentInstance.updateCompany=t,a.result.then(n=>{n&&this.ngOnInit()})}openCofirmDelete(t){this.modalService.open(D.n,{backdrop:"static",centered:!0}).result.then(n=>{n&&this.deleteData(t)})}deleteData(t){this.companyService.deleteData(this.userId,t).subscribe(a=>{a&&this.ngOnInit()})}getAllData(){this.companyService.getData().subscribe(t=>{this.dataTable=t})}appendItemsToDataTable(){}showHideAddCompanyBtn(){this.companyService.getCompaniesProgramSetting().subscribe(t=>{t&&(this.showAddNewCompanyBtn=t.posted)})}static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-list-of-companies"]],standalone:!0,features:[e.jDz],decls:14,vars:7,consts:[[1,"row","m-0","pb-3"],[1,"col-9"],[1,"p-2"],[1,"col-3","text-end"],["class","btn btn-dark mt-3",3,"click",4,"ngIf"],["infinite-scroll","",1,"search-results-container",3,"scrollWindow","scrolled"],[1,"table","table-responsive","table-striped"],[1,"bg-light","sticky-top","top-0","table-dark"],[1,"bg-dark"],["class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"btn","btn-dark","mt-3",3,"click"],[1,"text-center"],["container","body",1,"text-end"],["container","body",1,"btn-group","me-3"],["ngbDropdown","","role","group","aria-label","Button group with nested dropdown",1,"btn-group"],["ngbDropdownToggle","",1,"fa-solid","fa-list","pointer"],["ngbDropdownMenu","",1,"dropdown-menu"],["ngbDropdownItem","",3,"click"],[1,"fa-solid","fa-eye"],[1,"fa-regular","fa-pen-to-square","text-primary"],[1,"fa-solid","fa-trash","text-danger"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,q,3,3,"button",4),e.qZA()(),e.TgZ(7,"div",5),e.NdJ("scrolled",function(m){return n.onScrollDown(m)}),e.TgZ(8,"table",6)(9,"thead",7)(10,"tr",8),e.YNc(11,w,3,3,"th",9),e.qZA()(),e.TgZ(12,"tbody"),e.YNc(13,F,30,15,"tr",10),e.qZA()()()),2&a&&(e.xp6(3),e.Oqu(e.lcZ(4,5,"companies.title")),e.xp6(3),e.Q6J("ngIf",n.showAddNewCompanyBtn),e.xp6(1),e.Q6J("scrollWindow",!1),e.xp6(4),e.Q6J("ngForOf",n.cols),e.xp6(2),e.Q6J("ngForOf",n.dataTable))},dependencies:[l.ez,l.sg,l.O5,d.XC,d.jt,d.iD,d.Vi,d.TH,b.Rq,b.Ry,h.aw,h.X$]})}return o})()}}]);