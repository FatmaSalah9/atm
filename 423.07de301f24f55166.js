"use strict";(self.webpackChunkatm_mangment=self.webpackChunkatm_mangment||[]).push([[423],{5277:(q,_,d)=>{d.d(_,{J:()=>e});var f=d(9862),C=d(5879);let e=(()=>{class c{constructor(){this.baseUrl="http://waleed81-001-site1.jtempurl.com",this.httpClient=(0,C.f3M)(f.eN)}createCompany(u){return this.httpClient.post(`${this.baseUrl}/Company/CreateCompany`,u)}updateData(u,h){return this.httpClient.put(`${this.baseUrl}/Company/UpdateCompany?CompanyId=${u}`,h)}getData(){return this.httpClient.get(`${this.baseUrl}/Company/GetAllCompanies`)}getAllRepresentativesForSpeceificCompany(u){return this.httpClient.get(`${this.baseUrl}/Company/GetAllRepresentativesForSpeceificCompany?CompanyDataId=${u}`)}getAllEmployeeForSpeceificCompany(u){return this.httpClient.get(`${this.baseUrl}/Company/GetAllEmployeeForSpeceificCompany?CompanyDataId=${u}`)}getAllAdmins(){return this.httpClient.get(`${this.baseUrl}/Company/GetAllAdmins`)}deleteData(u,h){return this.httpClient.delete(`${this.baseUrl}/Company/DeleteCompany?UserId=${u}&CompanyId=${h}`)}getCompaniesProgramSetting(){return this.httpClient.get(`${this.baseUrl}/Company/GetCompaniesProgramSetting`)}static#e=this.\u0275fac=function(h){return new(h||c)};static#t=this.\u0275prov=C.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},1423:(q,_,d)=>{d.r(_),d.d(_,{ListOfUsersComponent:()=>pe});var f=function(n){return n[n.Employeies=1]="Employeies",n[n.Representatives=2]="Representatives",n[n.SystemUsers=3]="SystemUsers",n}(f||{}),U=d(6283),e=d(5879),c=d(6814),F=d(3103),u=d(7285),h=d(7394),N=d(9315),J=d(7361),w=d(7215),A=d(882),L=d(980),M=d(5277),p=d(6223),D=d(8810),b=d(2384),S=d(8569),T=d(8431),P=d(3740),k=d(6828),Q=d(1778),g=d(3999);const j=["registerForm"];function R(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"img",56),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(20);return e.KtG(s.click())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("src",t.selectedImage,e.LSH)}}function O(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"img",57),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(20);return e.KtG(s.click())}),e.qZA()}}function G(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"i",58),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(20);return e.KtG(s.click())}),e.qZA()}}function V(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"i",59),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(20);return e.KtG(s.click())}),e.qZA()}}function E(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"label",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ng-select",63,64),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.currentUserRole=s)}),e.ALo(6,"translate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,9,"users.userRole")," "),e.xp6(2),e.Q6J("disabled",t.isView)("clearable",!1)("name","role")("items",t.roles)("ngModel",t.currentUserRole)("required",!0)("searchable",!1)("notFoundText",e.lcZ(6,11,"users.noDataFound"))}}function K(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",21)(2,"app-date-input",60),e.NdJ("CurentDate",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.user.dateStart=s)}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",21)(5,"app-date-input",61),e.NdJ("CurentDate",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.user.dateFinsh=s)}),e.ALo(6,"translate"),e.qZA()(),e.YNc(7,E,7,13,"div",62),e.qZA()}if(2&n){const t=e.oxw(),r=e.MAs(13);e.xp6(2),e.Q6J("label",e.lcZ(3,9,"users.startDate"))("currentForm",r)("ngbDateStruct",t.user.startDateMdule)("disabled",t.isView),e.xp6(3),e.Q6J("label",e.lcZ(6,11,"users.endDate"))("ngbDateStruct",t.user.endDateMdule)("currentForm",r)("disabled",t.isView),e.xp6(2),e.Q6J("ngIf",t.router.url.includes("employeies"))}}function $(n,l){1&n&&(e.TgZ(0,"div",65),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.required")," "))}function Y(n,l){1&n&&(e.TgZ(0,"div",65),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.username")," "))}const H=function(){return{standalone:!0}};function W(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ng-select",66,67),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.user.governorateCodeId=s)})("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.getCities(s.user.governorateCodeId))})("clear",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.user.cityCodeId=null)}),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("clearable",!0)("name","governorate")("items",t.governoratiesList)("ngModel",t.user.governorateCodeId)("notFoundText",e.lcZ(2,9,"users.noDataFound"))("searchable",!0)("required",!0)("disabled",t.isView)("ngModelOptions",e.DdM(11,H))}}const z=function(n){return{"ng-error":n}};function B(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ng-select",68,69),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.user.cityCodeId=s)}),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=e.oxw(),r=e.MAs(13);e.Q6J("clearable",!0)("name","city")("items",t.cities)("ngModel",t.user.cityCodeId)("required",!0)("searchable",!0)("notFoundText",e.lcZ(2,9,"users.noDataFound"))("ngClass",e.VKq(11,z,!t.user.cityCodeId&&r.submitted))("disabled",t.isView||!t.user.governorateCodeId)}}function X(n,l){1&n&&(e.TgZ(0,"p",65),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.required")," "))}function ee(n,l){1&n&&(e.TgZ(0,"small",70),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.passwordRequirements")," "))}function te(n,l){1&n&&(e.TgZ(0,"small",70),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.required")," "))}function se(n,l){1&n&&(e.TgZ(0,"small",70),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.required")," "))}function ne(n,l){1&n&&(e.TgZ(0,"small",70),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.confirmPasswordMismatch")," "))}const v=function(n){return{"border-danger":n}},y=function(n,l){return{"fa-eye":n,"fa-eye-slash":l}};let Z=(()=>{class n{constructor(){this.cities=[],this.companies=[],this.title="Add new user",this.roles=[],this.user=new w.xw,this.showPassword=!1,this.showConfirmPassword=!1,this.subscription=new h.w0,this.activeModal=(0,e.f3M)(u.Kz),this.userService=(0,e.f3M)(A.K),this.userRoleService=(0,e.f3M)(L.J),this.companyService=(0,e.f3M)(M.J),this.lookupService=(0,e.f3M)(J.W),this.bankService=(0,e.f3M)(Q.y),this.router=(0,e.f3M)(b.F0),this.userData=null,this.currentUserRole=1,this.userDataToUpdate=null,this.isView=!1,this.governoratiesList=[],this.subscriptions=new h.w0,this.userService.getUserData().subscribe(t=>{this.userData=t})}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){"/users/admins"===this.router.url?this.currentUserRole=1:"/users/representatives"===this.router.url?this.currentUserRole=3:(this.currentUserRole=2,this.getRoles()),this.userDataToUpdate?(this.user.cityCodeId=this.userDataToUpdate.cityCodeId,this.user.email=this.userDataToUpdate.email,this.user.companyDataId=this.userDataToUpdate.companyDataId,this.user.userName=this.userDataToUpdate.userName,this.user.userAddress=this.userDataToUpdate.userAddress,this.user.userNationalId=this.userDataToUpdate.userNationalId,this.user.userWhatsapp=this.userDataToUpdate.userWhatsapp,this.user.phoneNumber=this.userDataToUpdate.phoneNumber,this.user.dateFinsh=this.userDataToUpdate.dateFinsh,this.user.description=this.userDataToUpdate.description,this.user.imageFile=this.userDataToUpdate.imageUrl,this.user.dateStart=this.userDataToUpdate.dateStart,this.user.dateFinsh=this.userDataToUpdate.dateFinsh,this.user.modifiedby=this.userData?this.userData?.UserId:0,this.selectedImage=this.userDataToUpdate.imageUrl,this.user.dateFinsh=this.userDataToUpdate.dateFinsh,this.user.dateStart=this.userDataToUpdate.dateStart,this.user.endDateMdule=this.userDataToUpdate.dateFinsh?{day:parseInt(this.userDataToUpdate.dateFinsh.slice(8,10)),month:parseInt(this.userDataToUpdate.dateFinsh.slice(5,7)),year:parseInt(this.userDataToUpdate.dateFinsh.slice(0,4))}:null,this.user.startDateMdule={day:parseInt(this.userDataToUpdate.dateStart.slice(8,10)),month:parseInt(this.userDataToUpdate.dateStart.slice(5,7)),year:parseInt(this.userDataToUpdate.dateStart.slice(0,4))},this.geGovWithCity(this.userDataToUpdate.governorateCodeId)):(this.user.dateFinsh=null,this.getGovernoraties())}getRoles(){this.userRoleService.getRoles().subscribe(t=>{t&&(this.roles=t)})}geGovWithCity(t){t&&this.getStartUbData(t).subscribe(r=>{this.governoratiesList=r[0],this.cities=r[1],this.userDataToUpdate?.cityCodeId&&(this.user.cityCodeId=this.userDataToUpdate?.cityCodeId)})}handleFileInput(t){this.fileToUpload=t.target.files[0];const r=new FileReader;r.onload=s=>{this.selectedImage=s.target.result},r.readAsDataURL(this.fileToUpload)}saveDataTable(){this.userDataToUpdate?this.updateFullUserData():this.rigister()}rigister(){let t=new FormData;t.append("ImageFile",null==this.fileToUpload?null:this.fileToUpload),t.append("CityCodeId",this.user.cityCodeId?this.user.cityCodeId.toString():""),t.append("UserName",this.user.userName),t.append("Email",this.user.email),t.append("CompanyDataId",this.userData?this.userData.CompanyId:""),this.user.dateFinsh&&t.append("DateFinsh",this.user.dateFinsh),t.append("DateStart",`${this.user.startDateMdule.year}-${this.user.startDateMdule.month}-${this.user.startDateMdule.day}`),t.append("Description",this.user.description),t.append("Password",this.user.password),t.append("UserWhatsapp",this.user.userWhatsapp),t.append("UserNationalId",this.user.userNationalId),t.append("UserAddress",this.user.userAddress),t.append("PhoneNumber",this.user.phoneNumber),t.append("Roles",this.currentUserRole.toString()),t.append("CreateUserId",this.userData?this.userData.UserId.toString():""),this.subscription.add(this.userService.register(t).subscribe(r=>{r&&this.activeModal.close(!0)}))}updateFullUserData(){let t=new FormData;t.append("ImageFile",null==this.fileToUpload?null:this.fileToUpload),t.append("CityCodeId",this.user.cityCodeId?this.user.cityCodeId.toString():""),t.append("UserName",this.user.userName),t.append("Email",this.user.email),t.append("CompanyDataId",this.userData?this.userData.CompanyId:""),t.append("CompanyDataId",this.userData?this.userData.CompanyId:""),this.user.dateFinsh&&t.append("DateFinsh",this.user.dateFinsh),t.append("DateStart",this.user.dateStart),t.append("Description",this.user.description),t.append("Password",this.user.password),t.append("Id",this.userDataToUpdate?this.userDataToUpdate?.id.toString():""),t.append("UserWhatsapp",this.user.userWhatsapp),t.append("UserNationalId",this.user.userNationalId),t.append("UserAddress",this.user.userAddress),t.append("PhoneNumber",this.user.phoneNumber),t.append("Roles",this.currentUserRole.toString()),t.append("Modifiedby",this.userData?this.userData.UserId.toString():""),this.subscription.add(this.userService.updateFullUserData(t).subscribe(r=>{r&&this.activeModal.close(!0)}))}getCities(t){t&&this.subscriptions.add(this.bankService.getCitiesByGovernorateId(t).subscribe(r=>{r&&(this.cities=r,this.userDataToUpdate&&(this.user.cityCodeId=this.userDataToUpdate.cityCodeId))}))}getGovernoraties(){this.subscription.add(this.userService.getGovernoraties().subscribe(t=>{this.governoratiesList=t}))}getStartUbData(t){const r=this.userService.getGovernoraties(),s=this.bankService.getCitiesByGovernorateId(t);return(0,N.D)([r,s])}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-update-user"]],viewQuery:function(r,s){if(1&r&&e.Gf(j,5),2&r){let o;e.iGM(o=e.CRH())&&(s.registerForm=o.first)}},inputs:{title:"title",userDataToUpdate:"userDataToUpdate",isView:"isView"},standalone:!0,features:[e.jDz],decls:102,vars:123,consts:[[1,"demo-container"],[1,"row","m-0","p-3"],[1,"col-9"],[1,"col-3","text-end","pt-2"],[1,"fa-solid","fa-xmark","text-danger","fs-4","pointer",3,"click"],[1,"row"],[1,"col-12"],[1,"p-5","bg-white","rounded","shadow-lg","w-100","pt-0"],[3,"ngSubmit"],["registerForm","ngForm"],[1,"p-3","py-2"],[1,"col-12",2,"width","1px","height","1px","overflow","hidden"],["for","userImage"],["type","file","accept",".jpg, .jpeg, .png, image/jpeg, image/png",3,"disabled","change"],["userImage",""],[1,"col-12","position-relative","profile-image","text-center"],["alt","user-image","class","user-image",3,"src","click",4,"ngIf"],["src","/assets/images/user-img.png","alt","user-image","class","user-image",3,"click",4,"ngIf"],["class","fa-solid fa-arrow-up-from-bracket pointer m-2",3,"click",4,"ngIf"],["class","fa-solid fa-pen-to-square pointer m-2",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-12","col-md-4"],[1,"text-gray-700","my-1","required"],["pattern","[^ ]+","type","text",1,"form-control",3,"disabled","required","name","ngModel","ngClass","ngModelChange"],["userName","ngModel"],["class","text-danger",4,"ngIf"],["ngDefaultControl","",3,"name","label","required","ngModel","currentForm","inputText","disabled","ngModelChange"],["address","ngModel"],["ngDefaultControl","",3,"inputMaxLength","minLength","name","label","required","ngModel","currentForm","inputText","disabled","ngModelChange"],["userNationalId","ngModel"],["userWhatsapp","ngModel"],["PhoneNumber","ngModel"],[1,"pb-3"],["ngDefaultControl","",3,"name","required","ngModel","currentForm","inputEmail","disabled","ngModelChange"],["email","ngModel"],["for","governorate",1,"my-1","required"],["ngDefaultControl","","bindLabel","governorateNameL1","bindValue","governorateId",3,"clearable","name","items","ngModel","notFoundText","searchable","required","disabled","ngModelOptions","ngModelChange","change","clear",4,"ngIf"],["for","city",1,"required","my-1"],["ngDefaultControl","","bindLabel","cityNameL1","bindValue","cityId",3,"clearable","name","items","ngModel","required","searchable","notFoundText","ngClass","disabled","ngModelChange",4,"ngIf"],[1,"position-relative","col-12","col-md-4"],["for","password",1,"font-500","required","my-1"],["name","password","required","","pattern","^(?=.*[A-Za-z])(?=.*\\d).{8,}$",1,"form-control","rounded-2",3,"type","ngModel","placeholder","ngClass","ngModelChange"],["password","ngModel"],[1,"password-toggle-icon","position-absolute","pointer",3,"click"],[1,"fa",3,"ngClass"],["class","text-muted text-danger",4,"ngIf"],["for","confirmPassword",1,"font-500","required","my-1"],["required","","name","confirmPassword",1,"form-control",3,"type","ngModel","placeholder","ngClass","ngModelChange"],["confirmPassword","ngModel"],[1,"password-toggle-icon","position-absolute",3,"click"],[1,"col-12","mt-2"],["for","",1,"mt-2"],["ngDefaultControl","",1,"form-control",3,"disabled","name","ngModel","ngModelChange"],["description","ngModel"],[1,"col-12","text-end"],["type","submit",1,"btn","btn-dark","shadow-lg","mt-3",3,"disabled"],["alt","user-image",1,"user-image",3,"src","click"],["src","/assets/images/user-img.png","alt","user-image",1,"user-image",3,"click"],[1,"fa-solid","fa-arrow-up-from-bracket","pointer","m-2",3,"click"],[1,"fa-solid","fa-pen-to-square","pointer","m-2",3,"click"],[3,"label","currentForm","ngbDateStruct","disabled","CurentDate"],[3,"label","ngbDateStruct","currentForm","disabled","CurentDate"],["class","col-12 col-md-4",4,"ngIf"],["ngDefaultControl","","bindLabel","name","bindValue","id",3,"disabled","clearable","name","items","ngModel","required","searchable","notFoundText","ngModelChange"],["role","ngModel"],[1,"text-danger"],["ngDefaultControl","","bindLabel","governorateNameL1","bindValue","governorateId",3,"clearable","name","items","ngModel","notFoundText","searchable","required","disabled","ngModelOptions","ngModelChange","change","clear"],["governorate","ngModel"],["ngDefaultControl","","bindLabel","cityNameL1","bindValue","cityId",3,"clearable","name","items","ngModel","required","searchable","notFoundText","ngClass","disabled","ngModelChange"],["city","ngModel"],[1,"text-muted","text-danger"]],template:function(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"h3"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",3)(8,"i",4),e.NdJ("click",function(){return s.activeModal.dismiss()}),e.qZA()()(),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(o);const a=e.MAs(13);return e.KtG(a.valid&&s.saveDataTable())}),e.TgZ(14,"div",5)(15,"div",10)(16,"div",11)(17,"label",12),e._uU(18),e.qZA(),e.TgZ(19,"input",13,14),e.NdJ("change",function(a){return s.handleFileInput(a)}),e.qZA()(),e.TgZ(21,"div",15),e.YNc(22,R,1,1,"img",16),e.YNc(23,O,1,0,"img",17),e.YNc(24,G,1,0,"i",18),e.YNc(25,V,1,0,"i",19),e.qZA()()(),e.YNc(26,K,8,13,"div",20),e.TgZ(27,"div",5)(28,"div",21)(29,"label",22),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"input",23,24),e.NdJ("ngModelChange",function(a){return s.user.userName=a}),e.qZA(),e.YNc(34,$,3,3,"div",25),e.YNc(35,Y,3,3,"div",25),e.qZA(),e.TgZ(36,"div",21)(37,"app-text-input",26,27),e.NdJ("ngModelChange",function(a){return s.user.userAddress=a}),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",21)(41,"app-input-number-only",28,29),e.NdJ("ngModelChange",function(a){return s.user.userNationalId=a}),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div",21)(45,"app-input-number-only",28,30),e.NdJ("ngModelChange",function(a){return s.user.userWhatsapp=a}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",21)(49,"app-input-number-only",28,31),e.NdJ("ngModelChange",function(a){return s.user.phoneNumber=a}),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"div",21)(53,"div",32)(54,"app-email-input",33,34),e.NdJ("ngModelChange",function(a){return s.user.email=a}),e.qZA()()(),e.TgZ(56,"div",21)(57,"div")(58,"label",35),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.YNc(61,W,3,12,"ng-select",36),e.qZA()(),e.TgZ(62,"div",21)(63,"div")(64,"label",37),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.YNc(67,B,3,13,"ng-select",38),e.YNc(68,X,3,3,"p",25),e.qZA()()(),e.TgZ(69,"div",5)(70,"div",39)(71,"label",40),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"input",41,42),e.NdJ("ngModelChange",function(a){return s.user.password=a}),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"span",43),e.NdJ("click",function(){return s.showPassword=!s.showPassword}),e._UZ(78,"i",44),e.qZA(),e.YNc(79,ee,3,3,"small",45),e.YNc(80,te,3,3,"small",45),e.qZA(),e.TgZ(81,"div",39)(82,"label",46),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.TgZ(85,"input",47,48),e.NdJ("ngModelChange",function(a){return s.user.confirmPassword=a}),e.ALo(87,"translate"),e.qZA(),e.TgZ(88,"span",49),e.NdJ("click",function(){return s.showConfirmPassword=!s.showConfirmPassword}),e._UZ(89,"i",44),e.qZA(),e.YNc(90,se,3,3,"small",45),e.YNc(91,ne,3,3,"small",45),e.qZA(),e.TgZ(92,"div",50)(93,"label",51),e._uU(94),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"textarea",52,53),e.NdJ("ngModelChange",function(a){return s.user.description=a}),e.qZA()()(),e.TgZ(98,"div",54)(99,"button",55),e._uU(100),e.ALo(101,"translate"),e.qZA()()()()()()()()}if(2&r){const o=e.MAs(13),i=e.MAs(33),a=e.MAs(75),m=e.MAs(86);e.xp6(5),e.Oqu(e.lcZ(6,83,"users.title")),e.xp6(13),e.Oqu("users.chooseFile"),e.xp6(1),e.Q6J("disabled",s.isView),e.xp6(3),e.Q6J("ngIf",s.selectedImage),e.xp6(1),e.Q6J("ngIf",!s.selectedImage),e.xp6(1),e.Q6J("ngIf",!s.selectedImage),e.xp6(1),e.Q6J("ngIf",s.selectedImage),e.xp6(1),e.Q6J("ngIf","/users/admins"!=s.router.url),e.xp6(4),e.hij(" ",e.lcZ(31,85,"users.username")," "),e.xp6(2),e.Q6J("disabled",s.isView)("required",!0)("name","Username")("ngModel",s.user.userName)("ngClass",e.VKq(111,v,(i.touched||(null==o?null:o.submitted))&&(null==i||null==i.errors?null:i.errors.required))),e.xp6(2),e.Q6J("ngIf",(i.touched||(null==o?null:o.submitted))&&(null==i||null==i.errors?null:i.errors.required)),e.xp6(1),e.Q6J("ngIf",(i.touched||(null==o?null:o.submitted))&&(null==i||null==i.errors?null:i.errors.pattern)),e.xp6(2),e.Q6J("name","Address")("label",e.lcZ(39,87,"users.address"))("required",!0)("ngModel",s.user.userAddress)("currentForm",o)("inputText",s.user.userAddress)("disabled",s.isView),e.xp6(4),e.Q6J("inputMaxLength",14)("minLength",14)("name","userNationalId")("label",e.lcZ(43,89,"users.nationalId"))("required",!0)("ngModel",s.user.userNationalId)("currentForm",o)("inputText",s.user.userNationalId)("disabled",s.isView),e.xp6(4),e.Q6J("inputMaxLength",11)("minLength",11)("name","userWhatsapp")("label",e.lcZ(47,91,"users.whatsapp"))("required",!0)("ngModel",s.user.userWhatsapp)("currentForm",o)("inputText",s.user.userWhatsapp)("disabled",s.isView),e.xp6(4),e.Q6J("inputMaxLength",11)("minLength",11)("name","PhoneNumber")("label",e.lcZ(51,93,"users.phone"))("required",!0)("ngModel",s.user.phoneNumber)("currentForm",o)("inputText",s.user.phoneNumber)("disabled",s.isView),e.xp6(5),e.Q6J("name","email")("required",!0)("ngModel",s.user.email)("currentForm",o)("inputEmail",s.user.email)("disabled",s.isView),e.xp6(5),e.hij(" ",e.lcZ(60,95,"users.governorate")," "),e.xp6(2),e.Q6J("ngIf",s.governoratiesList),e.xp6(4),e.hij(" ",e.lcZ(66,97,"users.city")," "),e.xp6(2),e.Q6J("ngIf",s.cities),e.xp6(1),e.Q6J("ngIf",!s.user.cityCodeId&&o.submitted),e.xp6(4),e.hij(" ",e.lcZ(73,99,"users.password")," "),e.xp6(2),e.s9C("type",s.showPassword?"text":"password"),e.s9C("placeholder",e.lcZ(76,101,"users.password")),e.Q6J("ngModel",s.user.password)("ngClass",e.VKq(113,v,(a.touched||o.submitted)&&a.errors)),e.xp6(4),e.Q6J("ngClass",e.WLB(115,y,s.showPassword,!s.showPassword)),e.xp6(1),e.Q6J("ngIf",(null==a||null==a.value?null:a.value.length)>0&&a.invalid&&(a.dirty||a.touched||o.submitted)),e.xp6(1),e.Q6J("ngIf",(a.touched||o.submitted)&&(null==a||null==a.errors?null:a.errors.required)),e.xp6(3),e.hij(" ",e.lcZ(84,103,"users.confirmPassword")," "),e.xp6(2),e.s9C("type",s.showConfirmPassword?"text":"password"),e.s9C("placeholder",e.lcZ(87,105,"users.confirmPassword")),e.Q6J("ngModel",s.user.confirmPassword)("ngClass",e.VKq(118,v,(m.touched||o.submitted)&&m.errors)),e.xp6(4),e.Q6J("ngClass",e.WLB(120,y,s.showConfirmPassword,!s.showConfirmPassword)),e.xp6(1),e.Q6J("ngIf",(m.touched||o.submitted)&&(null==m||null==m.errors?null:m.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==m||null==m.value?null:m.value.length)>0&&a.value!=m.value&&(m.dirty||m.touched||o.submitted)),e.xp6(3),e.hij(" ",e.lcZ(95,107,"users.description")," "),e.xp6(2),e.Q6J("disabled",s.isView)("name","taxRegistrationNumber")("ngModel",s.user.description),e.xp6(3),e.Q6J("disabled",s.isView),e.xp6(1),e.hij(" ",e.lcZ(101,109,"users.saveButton")," ")}},dependencies:[c.ez,c.mk,c.O5,p.u5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.c5,p.On,p.F,D.q,b.Bz,S.t,T.A0,T.w9,P.Y,k.d,g.aw,g.X$]})}return n})();function re(n,l){1&n&&(e.TgZ(0,"small",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.passwordRequirement")," "))}function ae(n,l){1&n&&(e.TgZ(0,"small",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.required")," "))}function ie(n,l){1&n&&(e.TgZ(0,"small",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.required")," "))}function oe(n,l){1&n&&(e.TgZ(0,"small",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"users.confirmPasswordMismatch")," "))}const I=function(n){return{"border-danger":n}},x=function(n,l){return{"fa-eye":n,"fa-eye-slash":l}};let de=(()=>{class n{constructor(){this.updatedUser=null,this.activeModal=(0,e.f3M)(u.Kz),this.userService=(0,e.f3M)(A.K),this.modalService=(0,e.f3M)(u.FF),this.userData=null,this.showPassword=!1,this.showConfirmPassword=!1,this.user=new w.Rl,this.userService.getUserData().subscribe(t=>{this.userData=t})}ngOnInit(){this.updatedUser&&(this.user.id=this.updatedUser.id,this.user.email=this.updatedUser.email)}createAccount(){this.user.modifiedby=this.userData?this.userData.UserId:0;let t={password:this.user.password,email:this.user.email,id:this.user.id,modifiedby:this.user.modifiedby=this.userData?this.userData.UserId:0};this.userService.createAccount(t).subscribe(r=>{r&&this.activeModal.close(!0)})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-user-password-and-email"]],inputs:{updatedUser:"updatedUser"},standalone:!0,features:[e.jDz],decls:40,vars:45,consts:[[1,"p-4",3,"ngSubmit"],["registerForm","ngForm"],[1,"row"],[1,"col-9"],[1,"col-3","text-end","pt-2"],[1,"fa-solid","fa-xmark","text-danger","fs-4","pointer",3,"click"],[1,"col-12"],[1,"pb-3"],["ngDefaultControl","",3,"name","required","ngModel","currentForm","inputEmail","ngModelChange"],["email","ngModel"],[1,"position-relative","col-12","col-md-6"],["for","password",1,"font-500","required","my-1"],["name","password","required","","pattern","^(?=.*[A-Za-z])(?=.*\\d).{8,}$",1,"form-control","rounded-2",3,"type","ngModel","placeholder","ngClass","ngModelChange"],["password","ngModel"],[1,"password-toggle-icon","position-absolute","pointer",3,"click"],[1,"fa",3,"ngClass"],["class","text-muted text-danger",4,"ngIf"],["for","confirmPassword",1,"font-500","required","my-1"],["required","","name","confirmPassword",1,"form-control",3,"type","ngModel","placeholder","ngClass","ngModelChange"],["confirmPassword","ngModel"],[1,"password-toggle-icon","position-absolute",3,"click"],[1,"col-12","text-end"],["type","submit",1,"btn","btn-dark","shadow-lg","mt-3"],[1,"text-muted","text-danger"]],template:function(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(o);const a=e.MAs(1);return e.KtG(a.valid&&s.createAccount())}),e.TgZ(2,"div",2)(3,"div",3)(4,"h3"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",4)(8,"i",5),e.NdJ("click",function(){return s.activeModal.dismiss()}),e.qZA()(),e.TgZ(9,"div",6)(10,"div",7)(11,"app-email-input",8,9),e.NdJ("ngModelChange",function(a){return s.user.email=a}),e.qZA()()(),e.TgZ(13,"div",10)(14,"label",11),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",12,13),e.NdJ("ngModelChange",function(a){return s.user.password=a}),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"span",14),e.NdJ("click",function(){return s.showPassword=!s.showPassword}),e._UZ(21,"i",15),e.qZA(),e.YNc(22,re,3,3,"small",16),e.YNc(23,ae,3,3,"small",16),e.qZA(),e.TgZ(24,"div",10)(25,"label",17),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"input",18,19),e.NdJ("ngModelChange",function(a){return s.user.confirmPassword=a}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"span",20),e.NdJ("click",function(){return s.showConfirmPassword=!s.showConfirmPassword}),e._UZ(32,"i",15),e.qZA(),e.YNc(33,ie,3,3,"small",16),e.YNc(34,oe,3,3,"small",16),e.qZA()(),e.TgZ(35,"div",2)(36,"div",21)(37,"button",22),e._uU(38),e.ALo(39,"translate"),e.qZA()()()()}if(2&r){const o=e.MAs(1),i=e.MAs(18),a=e.MAs(29);e.xp6(5),e.Oqu(e.lcZ(6,23,"users.createAccount")),e.xp6(6),e.Q6J("name","email")("required",!0)("ngModel",s.user.email)("currentForm",o)("inputEmail",s.user.email),e.xp6(4),e.hij(" ",e.lcZ(16,25,"users.password")," "),e.xp6(2),e.s9C("type",s.showPassword?"text":"password"),e.s9C("placeholder",e.lcZ(19,27,"users.password")),e.Q6J("ngModel",s.user.password)("ngClass",e.VKq(35,I,(i.touched||o.submitted)&&i.errors)),e.xp6(4),e.Q6J("ngClass",e.WLB(37,x,s.showPassword,!s.showPassword)),e.xp6(1),e.Q6J("ngIf",(null==i||null==i.value?null:i.value.length)>0&&i.invalid&&(i.dirty||i.touched||o.submitted)),e.xp6(1),e.Q6J("ngIf",(i.touched||o.submitted)&&(null==i||null==i.errors?null:i.errors.required)),e.xp6(3),e.hij(" ",e.lcZ(27,29,"users.confirmPassword")," "),e.xp6(2),e.s9C("type",s.showConfirmPassword?"text":"password"),e.s9C("placeholder",e.lcZ(30,31,"users.confirmPassword")),e.Q6J("ngModel",s.user.confirmPassword)("ngClass",e.VKq(40,I,(a.touched||o.submitted)&&a.errors)),e.xp6(4),e.Q6J("ngClass",e.WLB(42,x,s.showConfirmPassword,!s.showConfirmPassword)),e.xp6(1),e.Q6J("ngIf",(a.touched||o.submitted)&&(null==a||null==a.errors?null:a.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==a||null==a.value?null:a.value.length)>0&&i.value!=a.value&&(a.dirty||a.touched||o.submitted)),e.xp6(4),e.hij(" ",e.lcZ(39,33,"users.saveButton")," ")}},dependencies:[c.ez,c.mk,c.O5,p.u5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.c5,p.On,p.F,D.q,g.aw,g.X$]})}return n})();function le(n,l){if(1&n&&(e.TgZ(0,"th",7),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t))}}function ue(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",7),e._uU(2),e.qZA(),e.TgZ(3,"td",7),e._uU(4),e.qZA(),e.TgZ(5,"td",7),e._uU(6),e.qZA(),e.TgZ(7,"td",7),e._uU(8),e.qZA(),e.TgZ(9,"td",8)(10,"div",9)(11,"div",10),e._UZ(12,"i",11),e.TgZ(13,"div",12)(14,"button",13),e.NdJ("click",function(){const o=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.viewDataTable(o))}),e._UZ(15,"i",14),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"button",13),e.NdJ("click",function(){const o=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.createUser(o))}),e._UZ(19,"i",15),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",13),e.NdJ("click",function(){const o=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.updateDataTable(o))}),e._UZ(23,"i",16),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"button",13),e.NdJ("click",function(){const o=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openCofirmDelete(o.id))}),e._UZ(27,"i",17),e._uU(28),e.ALo(29,"translate"),e.qZA()()()()()()}if(2&n){const t=l.$implicit,r=l.index;e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(8),e.hij(" ",e.lcZ(17,8,"users.view")," "),e.xp6(4),e.hij(" ",e.lcZ(21,10,"users.createAccount")," "),e.xp6(4),e.hij(" ",e.lcZ(25,12,"users.update")," "),e.xp6(4),e.hij(" ",e.lcZ(29,14,"users.delete")," ")}}let pe=(()=>{class n{constructor(){this.UserTypeEnum=f,this.direction="",this.cols=["users.number","users.username","users.email","users.phone",""],this.selectedUserTypeId=1,this.dataTable=[],this.modalService=(0,e.f3M)(u.FF),this.userService=(0,e.f3M)(A.K),this.companyService=(0,e.f3M)(M.J),this.router=(0,e.f3M)(b.F0),this.userData=null,this.pageTitle="Admins",this.userService.getUserData().subscribe(t=>{this.userData=t})}ngOnInit(){this.searchForData(),this.pageTitle=this.router.url.replace("/users/","")}searchForData(){"/users/employeies"===this.router.url?this.getEmployeies():"/users/representatives"===this.router.url?this.getRepresentatives():this.getAllAdmins()}getEmployeies(){this.companyService.getAllEmployeeForSpeceificCompany(this.userData?this.userData.CompanyId:"").subscribe(t=>{t&&(this.dataTable=t)})}getAllAdmins(){this.companyService.getAllAdmins().subscribe(t=>{t&&(this.dataTable=t)})}getRepresentatives(){this.companyService.getAllRepresentativesForSpeceificCompany(this.userData?this.userData.CompanyId:"").subscribe(t=>{t&&(this.dataTable=t)})}addNew(){const t=this.modalService.open(Z,{backdrop:"static",centered:!0,size:"xl"});t.componentInstance.title="Add new  "+this.pageTitle,t.componentInstance.addNewUser=!0,t.result.then(r=>{r&&this.searchForData()})}onScrollDown(t){this.appendItemsToDataTable(),this.direction="scroll down"}createUser(t){const r=this.modalService.open(de,{backdrop:"static",centered:!0,size:"md"});r.componentInstance.user=t,r.result.then(s=>{s&&this.searchForData()})}updateDataTable(t){const r=this.modalService.open(Z,{backdrop:"static",centered:!0,size:"lg"});r.componentInstance.title="Update "+this.pageTitle,r.componentInstance.id=t.id,r.componentInstance.userDataToUpdate=t,r.result.then(s=>{s&&this.searchForData()})}openCofirmDelete(t){this.modalService.open(F.n,{backdrop:"static",centered:!0}).result.then(s=>{s&&this.deleteData(t)})}deleteData(t){this.userService.deletUser(t,this.userData?this.userData.UserId:0).subscribe(r=>{r&&this.searchForData()})}appendItemsToDataTable(){}viewDataTable(t){const r=this.modalService.open(Z,{backdrop:"static",centered:!0,size:"lg"});r.componentInstance.title="View "+this.pageTitle,r.componentInstance.userDataToUpdate=t,r.componentInstance.isView=!0,r.componentInstance.id=t.id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-of-users"]],standalone:!0,features:[e.jDz],decls:10,vars:5,consts:[[1,"col-3","text-end"],[1,"btn","btn-dark","m-3",3,"click"],[1,"table","table-responsive","table-striped"],[1,"bg-light","sticky-top","top-0","table-dark"],[1,"bg-dark"],["class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"text-center"],["container","body",1,"text-end"],["container","body",1,"btn-group","me-3"],["ngbDropdown","","role","group","aria-label","Button group with nested dropdown",1,"btn-group"],["ngbDropdownToggle","",1,"fa-solid","fa-list","pointer"],["ngbDropdownMenu","",1,"dropdown-menu"],["ngbDropdownItem","",3,"click"],[1,"fa-solid","fa-eye"],[1,"fa-regular","fa-address-card"],[1,"fa-regular","fa-pen-to-square","text-primary"],[1,"fa-solid","fa-trash","text-danger"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return s.addNew()}),e._uU(2),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"table",2)(5,"thead",3)(6,"tr",4),e.YNc(7,le,3,3,"th",5),e.qZA()(),e.TgZ(8,"tbody"),e.YNc(9,ue,30,16,"tr",6),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,3,"users.addNew")),e.xp6(5),e.Q6J("ngForOf",s.cols),e.xp6(2),e.Q6J("ngForOf",s.dataTable))},dependencies:[c.ez,c.sg,U.Rq,u.XC,u.jt,u.iD,u.Vi,u.TH,T.A0,p.u5,g.aw,g.X$]})}return n})()}}]);